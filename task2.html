<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<title>Testing</title>

	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<meta name="description" content="Testing">

    <link rel="icon" href="data:;base64,iVBORw0KGgo=">
    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <style>
        .show-degree:after {
            content: "\00b0";
        }
    </style>
</head>

<body>
    <div id="root"></div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.4.2/react.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.4.2/react-dom.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.21.1/babel.min.js"></script>
    <script type="text/babel">
        function httpGetAsync(theUrl, callback, callbackErr)
        {
            var xmlHttp = new XMLHttpRequest();
            xmlHttp.onreadystatechange = function() { 
                if (xmlHttp.readyState == 4 && xmlHttp.status == 200) {
                    callback(JSON.parse(xmlHttp.responseText));
                } else {
                    callbackErr(xmlHttp.responseText);
                }
            }
            xmlHttp.open("GET", theUrl, true); // true for asynchronous 
            xmlHttp.send(null);
        }

        class TestingGA extends React.Component {
            constructor(props) {
                super(props);

                this.state = {
                    data: {},
                    isFailed: true
                }
            }

            componentWillMount() {
                httpGetAsync('https://api.openweathermap.org/data/2.5/weather?appid=39f5d9d1b122aeccc03396a0537bb7ed&id=2172797',
                (res) => {
                    this.setState({
                        data: res,
                        isFailed: false
                    })
                },
                (err) => {
                    this.setState({
                        data: {},
                        isFailed: true
                    })
                });
            }
            render() {
                const {data, isFailed} = this.state;

                return (

                    <div>
                        <nav className="navbar navbar-default">
                            <div className="container">
                                <div className="navbar-header">
                                    <a className="navbar-brand">Testing</a>
                                </div>
                                <ul className="nav navbar-nav">
                                    <li><a>Home</a></li>
                                    <li><a>Home2</a></li>
                                    <li><a>Home3</a></li>
                                </ul>
                            </div>
                        </nav>
                        <div className="container">
                            {
                                !isFailed ? 
                                <div>
                                    {/* Show 2 column in md, 4 d */}
                                    <div className="row">
                                        <div className="col-md-3 col-sm-6 col-xs-12">Country</div>
                                        <div className="col-md-3 col-sm-6 col-xs-12">{data.sys ? data.sys.country: ''}</div>
                                        <div className="col-md-3 col-sm-6 col-xs-12">Temperature now</div>
                                        <div className="col-md-3 col-sm-6 col-xs-12">{data.main ? data.main.temp: '0'}<span className="show-degree"></span>F</div>
                                    </div>

                                    <div className="row">
                                        <div className="col-md-3 col-sm-6 col-xs-12">Temperature min today</div>
                                        <div className="col-md-3 col-sm-6 col-xs-12">{data.main ? data.main.temp_min: '0'}<span className="show-degree">0</span>F</div>
                                        <div className="col-md-3 col-sm-6 col-xs-12">Temperature max today</div>
                                        <div className="col-md-3 col-sm-6 col-xs-12">{data.main ? data.main.temp_max: '0'}<span className="show-degree">0</span>F</div>
                                    </div>
                                    
                                </div> : null
                            }
                        </div>
                    </div>
                );
            }
        }
        ReactDOM.render(
            <TestingGA />,
            document.getElementById('root')
        );
    </script>

</body>

</html>
